# Istio Gateway configuration to expose services to external traffic
# This configuration allows HTTP traffic to flow into the service mesh via the ingress gateway.
apiVersion: networking.istio.io/v1beta1
kind: Gateway
metadata:
  name: mesh-gateway               # Name of the Gateway
  namespace: istio-ingress          # Namespace where the gateway is deployed (ensure the namespace exists)
spec:
  selector:
    istio: ingressgateway           # Selects the Istio Ingress Gateway defined in the istio-ingress namespace
  servers:
    - port:
        number: 80                 # Port 80 is for handling HTTP traffic
        name: http                 # Name of the port (can be referenced in VirtualService)
        protocol: HTTP             # Protocol for this server (HTTP)
      hosts:
        - "ollama.<your-ip>.nip.io"  # Replace <your-ip> with the dynamic or static IP/domain
                                      # nip.io provides dynamic DNS based on the external IP of the service
                                      # For example, nip.io resolves "34.23.174.110.nip.io" to 34.23.174.110
                                      # This allows easy DNS resolution for your service without setting up external DNS
